<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RSC Keno - 10 Spot Only</title>
<style>
  :root{
    --bg1:#070709; --bg2:#141217; --gold:#d4af37; --accent:#0ff; --muted:#2a2a2a;
    --card:#111; --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;background:linear-gradient(160deg,var(--bg1),var(--bg2));color:#f3f3f3}
  .container{max-width:1100px;margin:24px auto;padding:18px;display:grid;grid-template-columns:1fr 360px;gap:20px}
  header{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between}
  h1{margin:0;font-size:28px;color:var(--gold);text-shadow:0 3px 10px rgba(0,0,0,0.6)}
  .sub{color:#cfcfcf;opacity:0.9}
  .board-card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  #grid{display:grid;grid-template-columns:repeat(10,54px);gap:8px;justify-content:center}
  .cell{width:54px;height:54px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;border:2px solid rgba(255,255,255,0.06);background:#111;color:#bbb;transition:transform .15s,box-shadow .15s}
  .cell:hover{transform:translateY(-4px);box-shadow:0 8px 18px rgba(0,0,0,0.6)}
  .cell.unpicked{background:#0f0f10;color:#3b3b3b;border-color:#1a1a1a;cursor:pointer}
  .cell.selected{background:var(--gold);color:#111;border-color:#f0c96b}
  .cell.hit{background:#32cd32;color:#031;box-shadow:0 6px 18px rgba(50,205,50,0.4);border-color:#43ff6b}
  .cell.miss{background:#d43b3b;color:#fff;border-color:#ffb3b3}
  .cell.drawn-unpicked{background:#555;color:#17202a;border-color:#444;cursor:default}
  .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
  .stat{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .stat strong{color:var(--gold)}
  input[type=number]{width:110px;padding:8px;border-radius:8px;border:none;background:#0f0f10;color:#fff;font-weight:600}
  select {width: 130px; padding: 7px 8px; border-radius: 8px; background:#0f0f10; color:#eee; border:none; font-weight:600;}
  button.primary{background:linear-gradient(180deg,var(--gold),#c99f30);color:#111;padding:10px 16px;border-radius:10px;border:none;font-weight:800;cursor:pointer}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:#ddd;cursor:pointer}
  .drawn-list{display:flex;flex-wrap:wrap;gap:6px;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px;min-height:48px}
  .drawn-item{background:#111;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03)}
  .payouts{margin-top:12px}
  table{width:100%;border-collapse:collapse;color:#eee}
  th,td{padding:6px 8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03);font-size:13px}
  .flash{animation:flash 700ms ease-out}
  @keyframes flash{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>RSC Keno</h1>
      <!-- tagline part removed as requested -->
      <div class="sub">Pick exactly 10 numbers</div>
    </div>
  </header>

  <div class="board-card">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div>
        <div style="font-size:14px;color:#cfcfcf">Pick exactly <strong>10</strong> numbers</div>
        <div style="font-size:12px;color:#999;margin-top:6px">Click numbers to select. Use <em>Quick Pick</em> to auto-select 10 numbers.</div>
      </div>
      <div style="display:flex;align-items:center;gap:8px">
        <button class="ghost" id="quickPick">Quick Pick</button>
        <button class="ghost" id="clearPick">Clear</button>
        <!-- Quick Draw toggle added -->
        <label style="color:#ccc;font-size:13px;display:flex;align-items:center;gap:6px;margin-left:8px">
          <input type="checkbox" id="quickDraw"> Quick Draw
        </label>
      </div>
    </div>

    <div id="grid" style="margin-top:16px"></div>

    <div style="display:flex;align-items:center;justify-content:space-between;margin-top:14px">
      <div style="width:60%">
        <div style="font-size:13px;color:#ccc">Numbers drawn (in order):</div>
        <div id="drawnArea" class="drawn-list" aria-live="polite"></div>
      </div>
      <div style="width:36%;text-align:right">
        <div style="font-size:13px;color:#ccc">Results</div>
        <div id="resultText" style="margin-top:6px;font-size:18px;font-weight:800;color:var(--gold)"></div>
      </div>
    </div>
  </div>

  <aside class="panel">
    <div class="stat"><div>Bankroll (Rax)</div><div><strong id="bankroll">10000</strong></div></div>

    <div class="stat" style="flex-direction: column; align-items: flex-start; gap: 8px;">
      <label for="startingBankroll" style="font-size:13px;color:#ccc; user-select:none;">Choose Starting Bankroll (Rax)</label>
      <select id="startingBankroll">
        <optgroup label="Under 10,000 Rax">
          <option value="1000">1,000</option>
          <option value="2000">2,000</option>
          <option value="3000">3,000</option>
          <option value="4000">4,000</option>
          <option value="5000">5,000</option>
          <option value="6000">6,000</option>
          <option value="7000">7,000</option>
          <option value="8000">8,000</option>
          <option value="9000">9,000</option>
        </optgroup>
        <optgroup label="10,000 and above">
          <option value="10000" selected>10,000</option>
          <option value="20000">20,000</option>
          <option value="30000">30,000</option>
          <option value="40000">40,000</option>
          <option value="50000">50,000</option>
          <option value="60000">60,000</option>
          <option value="70000">70,000</option>
          <option value="80000">80,000</option>
          <option value="90000">90,000</option>
          <option value="100000">100,000</option>
        </optgroup>
      </select>
    </div>

    <div class="stat"><div>Bet</div><div><input id="bet" type="number" min="1" value="100"></div></div>
    <div class="stat"><div>Selected</div><div><strong id="pickedCount">0</strong>/10</div></div>

    <div style="display:flex;gap:8px;margin-top:10px">
      <button class="primary" id="drawBtn">Draw Numbers</button>
      <button class="ghost" id="autoSim">REAL'S SPORTSBOOK AND CASINO</button>
    </div>

    <div style="margin-top:12px;font-size:13px;color:#ccc">Payout table (10-spot pick)</div>
    <div class="payouts" id="payoutsArea"></div>

    <div style="margin-top:12px;font-size:13px;color:#ccc">Controls</div>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button class="ghost" id="soundToggle">Sound: On</button>
      <button class="ghost" id="resetBank">Reset Bank</button>
    </div>
  </aside>
</div>

<script>
  // --- Game state ---
  let bankroll = 10000;
  let bankrollLocked = false; // lock after first draw
  const maxPicks = 10;
  const totalNumbers = 80;
  const drawCount = 20;

  const gridEl = document.getElementById('grid');
  const drawnArea = document.getElementById('drawnArea');
  const resultText = document.getElementById('resultText');
  const pickedCountEl = document.getElementById('pickedCount');
  const bankrollEl = document.getElementById('bankroll');
  const betEl = document.getElementById('bet');
  const drawBtn = document.getElementById('drawBtn');
  const quickPickBtn = document.getElementById('quickPick');
  const clearPickBtn = document.getElementById('clearPick');
  const payoutsArea = document.getElementById('payoutsArea');
  const soundToggle = document.getElementById('soundToggle');
  const autoSimBtn = document.getElementById('autoSim');
  const resetBankBtn = document.getElementById('resetBank');
  const startingBankrollEl = document.getElementById('startingBankroll');
  const quickDrawCheckbox = document.getElementById('quickDraw');

  let soundOn = true;

  // Create board cells
  for(let i=1; i<=totalNumbers; i++){
    let c = document.createElement('div');
    c.className = 'cell unpicked';
    c.textContent = i;
    c.dataset.num = i;
    c.addEventListener('click',()=>togglePick(i,c));
    gridEl.appendChild(c);
  }

  let selected = new Set();

  function togglePick(n,el){
    if(bankrollLocked === false && bankroll !== Number(startingBankrollEl.value)) {
      bankroll = Number(startingBankrollEl.value);
      bankrollEl.textContent = bankroll;
    }
    if(selected.has(n)){
      selected.delete(n);
      el.className='cell unpicked';
    } else {
      if(selected.size >= maxPicks){
        el.classList.add('flash'); 
        setTimeout(()=>el.classList.remove('flash'),300);
        return;
      }
      selected.add(n);
      el.className='cell selected';
    }
    pickedCountEl.textContent = selected.size;
    renderPayouts();
  }

  quickPickBtn.addEventListener('click',()=>{
    if(bankrollLocked === false && bankroll !== Number(startingBankrollEl.value)) {
      bankroll = Number(startingBankrollEl.value);
      bankrollEl.textContent = bankroll;
    }
    clearSelections();
    const avail = Array.from({length:totalNumbers},(_,i)=>i+1);
    while(selected.size < maxPicks){
      let i = Math.floor(Math.random()*avail.length);
      selected.add(avail.splice(i,1)[0]);
    }
    [...selected].forEach(n=>{
      gridEl.children[n-1].className='cell selected';
    });
    pickedCountEl.textContent = selected.size;
    renderPayouts();
  });

  clearPickBtn.addEventListener('click',()=>{
    clearSelections();
    renderPayouts();
  });

  resetBankBtn.addEventListener('click',()=>{
    if(bankrollLocked) {
      alert("Can't reset bankroll mid-session. Refresh page to restart.");
      return;
    }
    bankroll = Number(startingBankrollEl.value);
    bankrollEl.textContent = bankroll;
  });

  startingBankrollEl.addEventListener('change',()=>{
    if(bankrollLocked) {
      startingBankrollEl.value = bankroll;
      alert("Bankroll locked for this session.");
      return;
    }
    bankroll = Number(startingBankrollEl.value);
    bankrollEl.textContent = bankroll;
  });

  function clearSelections(){
    selected.clear();
    for(let i=0; i<totalNumbers; i++){
      gridEl.children[i].className='cell unpicked';
    }
    pickedCountEl.textContent = 0;
  }

  // Payout table with strong house edge
  const payoutTable10 = [0, 0, 0, 1, 2, 4, 10, 30, 80, 200, 800];

  function getPayout(matches, bet) {
    if(matches < 0 || matches > 10) return 0;
    return bet * payoutTable10[matches];
  }

  function renderPayouts(){
    let html = '<table><thead><tr><th>Matches</th><th>Multiplier</th></tr></thead><tbody>';
    for(let m=0; m<payoutTable10.length; m++){
      html += `<tr${m < 3 ? ' style="color:#555"' : ''}><td>${m}</td><td>× ${payoutTable10[m]}</td></tr>`;
    }
    html += '</tbody></table>';
    payoutsArea.innerHTML = html;
  }
  renderPayouts();

  // --- Audio helpers ---
  const AudioCtx = window.AudioContext || window.webkitAudioContext;
  let audioCtx=null;
  function ensureAudio(){ if(!audioCtx) audioCtx=new AudioCtx(); }
  function playDing(){ if(!soundOn) return; ensureAudio(); let o=audioCtx.createOscillator(); let g=audioCtx.createGain(); o.type='sine'; o.frequency.value=880; g.gain.value=0.12; o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.09); }
  function playThud(){ if(!soundOn) return; ensureAudio(); let o=audioCtx.createOscillator(); let g=audioCtx.createGain(); o.type='sawtooth'; o.frequency.value=160; g.gain.value=0.12; o.connect(g); g.connect(audioCtx.destination); o.start(); let now=audioCtx.currentTime; o.frequency.setValueAtTime(160,now); o.frequency.exponentialRampToValueAtTime(60, now+0.12); g.gain.setValueAtTime(0.12, now); g.gain.exponentialRampToValueAtTime(0.001, now+0.13); o.stop(now+0.14); }

  soundToggle.addEventListener('click',()=>{
    soundOn = !soundOn;
    soundToggle.textContent = `Sound: ${soundOn?'On':'Off'}`;
  });

  // --- Draw logic ---
  function shuffle(array){
    for(let i=array.length-1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [array[i],array[j]]=[array[j],array[i]];
    }
    return array;
  }

  async function drawNumbers(){
    if(selected.size !== maxPicks){
      alert(`You must pick exactly ${maxPicks} numbers.`);
      return;
    }
    let bet = Number(betEl.value);
    if(isNaN(bet) || bet < 1){
      alert("Please enter a valid bet ≥ 1.");
      return;
    }
    if(bet > bankroll){
      alert("Bet cannot exceed bankroll.");
      return;
    }

    if(!bankrollLocked) {
      bankrollLocked = true;
      startingBankrollEl.disabled = true;
    }

    drawBtn.disabled = true;
    quickPickBtn.disabled = true;
    clearPickBtn.disabled = true;
    autoSimBtn.disabled = true;
    betEl.disabled = true;

    // Reset board colors for draw
    for(let i=0; i<totalNumbers; i++){
      let cell = gridEl.children[i];
      if(selected.has(i+1)){
        cell.className='cell selected';
      } else {
        cell.className='cell unpicked';
      }
    }

    // Draw 20 unique numbers
    let drawn = shuffle([...Array(totalNumbers).keys()].map(x=>x+1)).slice(0,drawCount);

    // Prepare drawnArea
    drawnArea.innerHTML = '';

    // Determine quick vs suspense
    const quick = quickDrawCheckbox.checked;

    let hits = 0;

    if (quick) {
      // Instant reveal: show list and highlight at once
      drawn.forEach(n=>{
        let d = document.createElement('div');
        d.textContent = n;
        d.className = 'drawn-item';
        drawnArea.appendChild(d);
      });

      for(let i=0; i<totalNumbers; i++){
        let cell = gridEl.children[i];
        if(drawn.includes(i+1)){
          if(selected.has(i+1)){
            cell.className='cell hit';
            hits++;
            // play sound briefly staggered could be annoying in instant mode; play single ding
          } else {
            cell.className='cell drawn-unpicked';
          }
        } else {
          if(selected.has(i+1)){
            cell.className='cell miss';
          } else {
            cell.className='cell unpicked';
          }
        }
      }
      // Play a ding if at least one hit
      if (hits > 0) playDing();
    } else {
      // Suspense reveal: first 10 quick, last 10 slower
      let idx = 0;
      function revealStep(){
        // Reset previous drawn-unpicked if needed was handled in earlier step; here we just reveal current
        if(idx < drawn.length){
          const num = drawn[idx];
          // append to drawnArea
          let d = document.createElement('div');
          d.textContent = num;
          d.className = 'drawn-item';
          drawnArea.appendChild(d);

          const cell = gridEl.children[num-1];
          if(selected.has(num)){
            cell.className='cell hit';
            hits++;
            playDing();
          } else {
            cell.className='cell drawn-unpicked';
            playThud();
          }

          idx++;
          const delay = idx <= 10 ? (100 + Math.random()*50) : (300 + Math.random()*200);
          setTimeout(revealStep, delay);
        } else {
          // After reveal finishes, mark any selected numbers that weren't hit as miss
          for(let n of selected){
            if(!drawn.includes(n)){
              gridEl.children[n-1].className='cell miss';
            }
          }
        }
      }
      revealStep();
      // Wait for full reveal to complete before computing final results and re-enabling controls.
      // Compute total time to wait: approx sum delays: we can compute total approx and await via Promise
      let totalDelay = 0;
      for(let k=1; k<=drawn.length; k++){
        totalDelay += (k <= 10 ? (100 + 25) : (300 + 100)); // use midpoints 125 and 400 ms as estimate
      }
      await new Promise(res => setTimeout(res, totalDelay + 120)); // small buffer
    }

    // Calculate winnings (done after reveal)
    let winnings = getPayout(hits, bet);
    bankroll = bankroll - bet + winnings;
    bankrollEl.textContent = bankroll;

    // Display result text
    if(winnings > 0){
      resultText.textContent = `You hit ${hits} numbers and won ${winnings} Rax! :)`;
      playDing();
    } else {
      resultText.textContent = `You hit ${hits} numbers and lost ${bet} Rax. :(`;
      playThud();
    }

    drawBtn.disabled = false;
    quickPickBtn.disabled = false;
    clearPickBtn.disabled = false;
    autoSimBtn.disabled = false;
    betEl.disabled = false;
  }

  drawBtn.addEventListener('click',drawNumbers);
  // Initialize bankroll on page load
  bankroll = Number(startingBankrollEl.value);
  bankrollEl.textContent = bankroll;

</script>
</body>
</html>
